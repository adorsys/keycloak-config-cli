
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
        <link rel="canonical" href="https://adorsys.github.io/keycloak-config-cli/config/otp-policy-configuration/">
      
      
        <link rel="prev" href="../partial-imports/">
      
      
        <link rel="next" href="../user-profile-unmanaged-attributes/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.2">
    
    
      
        <title>OTP Policy Configuration - kc-config-cli</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  
<meta property="og:type" content="website" />
<meta property="og:title" content="OTP Policy Configuration - kc-config-cli" />
<meta property="og:image" content="https://adorsys.github.io/keycloak-config-cli/assets/images/social/config/otp-policy-configuration.png" />
<meta property="og:image:type" content="image/png" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:url" content="https://adorsys.github.io/keycloak-config-cli/config/otp-policy-configuration/" />
<meta property="twitter:card" content="summary_large_image" />
<meta property="twitter:title" content="OTP Policy Configuration - kc-config-cli" />
<meta property="twitter:image" content="https://adorsys.github.io/keycloak-config-cli/assets/images/social/config/otp-policy-configuration.png" />
</head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#otp-policy-configuration" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="kc-config-cli" class="md-header__button md-logo" aria-label="kc-config-cli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            kc-config-cli
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              OTP Policy Configuration
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="default" data-md-color-primary="teal" data-md-color-accent="purple"  aria-label="Switch to dark mode"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Switch to dark mode" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 6H7c-3.31 0-6 2.69-6 6s2.69 6 6 6h10c3.31 0 6-2.69 6-6s-2.69-6-6-6m0 10H7c-2.21 0-4-1.79-4-4s1.79-4 4-4h10c2.21 0 4 1.79 4 4s-1.79 4-4 4M7 9c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="" data-md-color-scheme="slate" data-md-color-primary="teal" data-md-color-accent="lime"  aria-label="Switch to light mode"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Switch to light mode" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M17 7H7a5 5 0 0 0-5 5 5 5 0 0 0 5 5h10a5 5 0 0 0 5-5 5 5 0 0 0-5-5m0 8a3 3 0 0 1-3-3 3 3 0 0 1 3-3 3 3 0 0 1 3 3 3 3 0 0 1-3 3"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../.." class="md-tabs__link">
          
  
  
  Home

        </a>
      </li>
    
  

      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href="./" class="md-tabs__link">
          
  
  
  Use Cases

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


  

<nav class="md-nav md-nav--primary md-nav--lifted md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="kc-config-cli" class="md-nav__button md-logo" aria-label="kc-config-cli" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    kc-config-cli
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    
    
    
    
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" >
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Home
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Home
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Getting Started
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../supported-features/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Supported Features
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ORGANIZATIONS/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Organizations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../import-settings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Import settings
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../managed-resource/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    managed-resources
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../RedHat-SSO-compatibility/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Redhat-sso compatibility
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../skip-server-info/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Skip Server Info
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helm-chart/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Helm Chart
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
        
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" checked>
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Use Cases
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Use Cases
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    OTP Policy Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    OTP Policy Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-otp-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is OTP Policy?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-otppolicyalgorithm-gets-ignored" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why otpPolicyAlgorithm Gets Ignored
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-otp-policy-configuration-totp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete OTP Policy Configuration (TOTP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incomplete-configuration-problematic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Incomplete Configuration (Problematic)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotp-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        HOTP Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-security-otp-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        High Security OTP Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#otp-policy-fields-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Policy Fields Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Pitfalls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-setting-only-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting Only Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mixing-totp-and-hotp-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mixing TOTP and HOTP Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-incorrect-algorithm-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Incorrect Algorithm Names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-exporting-and-missing-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Exporting and Missing Fields
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Template
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-otp-policy-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying OTP Policy Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithm-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Algorithm Comparison
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-sha1-to-sha256" class="md-nav__link">
    <span class="md-ellipsis">
      
        From SHA1 to SHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otp-algorithm-not-applying" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Algorithm Not Applying
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users-cant-authenticate-after-otp-change" class="md-nav__link">
    <span class="md-ellipsis">
      
        Users Can't Authenticate After OTP Change
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Options
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-problem_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-otp-policy_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is OTP Policy?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-otppolicyalgorithm-gets-ignored_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why otpPolicyAlgorithm Gets Ignored
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-otp-policy-configuration-totp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete OTP Policy Configuration (TOTP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incomplete-configuration-problematic_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Incomplete Configuration (Problematic)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotp-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        HOTP Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-security-otp-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        High Security OTP Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#otp-policy-fields-reference_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Policy Fields Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Pitfalls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-setting-only-algorithm_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting Only Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mixing-totp-and-hotp-settings_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mixing TOTP and HOTP Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-incorrect-algorithm-names_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Incorrect Algorithm Names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-exporting-and-missing-fields_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Exporting and Missing Fields
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-template_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Template
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-otp-policy-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying OTP Policy Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithm-comparison_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Algorithm Comparison
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-sha1-to-sha256_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        From SHA1 to SHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otp-algorithm-not-applying_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Algorithm Not Applying
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users-cant-authenticate-after-otp-change_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Users Can't Authenticate After OTP Change
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Options
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-issues_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fine-grained-permissions-v2.md" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fine-Grained Permissions V2
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../partial-imports/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Partial Imports
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    OTP Policy Configuration
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    OTP Policy Configuration
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#the-problem" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-otp-policy" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is OTP Policy?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-otppolicyalgorithm-gets-ignored" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why otpPolicyAlgorithm Gets Ignored
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-otp-policy-configuration-totp" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete OTP Policy Configuration (TOTP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incomplete-configuration-problematic" class="md-nav__link">
    <span class="md-ellipsis">
      
        Incomplete Configuration (Problematic)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotp-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        HOTP Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-security-otp-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        High Security OTP Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#otp-policy-fields-reference" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Policy Fields Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Pitfalls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-setting-only-algorithm" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting Only Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mixing-totp-and-hotp-settings" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mixing TOTP and HOTP Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-incorrect-algorithm-names" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Incorrect Algorithm Names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-exporting-and-missing-fields" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Exporting and Missing Fields
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-template" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Template
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-otp-policy-configuration" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying OTP Policy Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithm-comparison" class="md-nav__link">
    <span class="md-ellipsis">
      
        Algorithm Comparison
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-sha1-to-sha256" class="md-nav__link">
    <span class="md-ellipsis">
      
        From SHA1 to SHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otp-algorithm-not-applying" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Algorithm Not Applying
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users-cant-authenticate-after-otp-change" class="md-nav__link">
    <span class="md-ellipsis">
      
        Users Can't Authenticate After OTP Change
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Options
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-issues" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#the-problem_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Problem
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#what-is-otp-policy_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        What is OTP Policy?
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#why-otppolicyalgorithm-gets-ignored_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Why otpPolicyAlgorithm Gets Ignored
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#usage_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Usage
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Usage">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complete-otp-policy-configuration-totp_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Complete OTP Policy Configuration (TOTP)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#incomplete-configuration-problematic_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Incomplete Configuration (Problematic)
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#hotp-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        HOTP Configuration
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#high-security-otp-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        High Security OTP Configuration
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#otp-policy-fields-reference_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Policy Fields Reference
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#common-pitfalls_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Common Pitfalls
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Common Pitfalls">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#1-setting-only-algorithm_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        1. Setting Only Algorithm
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#2-mixing-totp-and-hotp-settings_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        2. Mixing TOTP and HOTP Settings
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#3-incorrect-algorithm-names_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        3. Incorrect Algorithm Names
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#4-exporting-and-missing-fields_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Exporting and Missing Fields
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#best-practices_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Best Practices
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-template_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Template
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#verifying-otp-policy-configuration_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verifying OTP Policy Configuration
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#algorithm-comparison_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Algorithm Comparison
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#migration-guide_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Migration Guide
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Migration Guide">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#from-sha1-to-sha256_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        From SHA1 to SHA256
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#troubleshooting_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Troubleshooting
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Troubleshooting">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#otp-algorithm-not-applying_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        OTP Algorithm Not Applying
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#users-cant-authenticate-after-otp-change_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Users Can't Authenticate After OTP Change
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#configuration-options_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Configuration Options
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#consequences_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Consequences
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#security-considerations_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Security Considerations
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#related-issues_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Related Issues
      
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#additional-resources_1" class="md-nav__link">
    <span class="md-ellipsis">
      
        Additional Resources
      
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../user-profile-unmanaged-attributes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    User Profile Unmanaged Attributes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../non-master-realm-authentication/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Non-Master Realm Authentication
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../built-in-client-roles/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Managing Built-in Client Roles
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../remote-state-management/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Remote State Management
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../addind-multiple-post-logout-redirect-uris/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Adding Multiple post.logout.redirect.uris
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../minimal-configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Minimal Configurations From exported JSON
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../Authenticator-Configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Authenticator configuration
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../environmental-variable-substitution-for-json-array/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Environment Variable Substitution for JSON Arrays
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../apply-jsonschema-in-intellij/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Setting up jsonschema in intelliJ
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="otp-policy-configuration">OTP Policy Configuration</h1>
<p>When configuring One-Time Password (OTP) policies in Keycloak realms, users often encounter issues where certain OTP policy settings appear to be ignored during import. Understanding how to properly configure OTP policies in keycloak-config-cli is essential for ensuring multi-factor authentication works as expected.</p>
<p>Related issues: <a href="https://github.com/adorsys/keycloak-config-cli/issues/847">#847</a></p>
<h2 id="the-problem">The Problem</h2>
<p>Users often encounter confusion when configuring OTP policies because:
- Setting only <code>otpPolicyAlgorithm</code> in the configuration doesn't apply the change
- Some OTP policy fields appear to be ignored during import
- It's unclear which OTP policy fields must be configured together
- Default values may override explicitly set values if the configuration is incomplete
- The relationship between different OTP policy settings is not obvious</p>
<h2 id="what-is-otp-policy">What is OTP Policy?</h2>
<p>OTP (One-Time Password) policy in Keycloak controls how Time-based One-Time Passwords (TOTP) and HMAC-based One-Time Passwords (HOTP) are generated and validated for multi-factor authentication.</p>
<p><strong>Key OTP Policy Settings:</strong>
- <strong>Algorithm</strong>: Hash algorithm used (HmacSHA1, HmacSHA256, HmacSHA512)
- <strong>Digits</strong>: Number of digits in the OTP (6 or 8)
- <strong>Period</strong>: Time window for TOTP validity (in seconds)
- <strong>Initial Counter</strong>: Starting counter value for HOTP
- <strong>Look Ahead Window</strong>: Number of intervals to check for validation</p>
<h2 id="why-otppolicyalgorithm-gets-ignored">Why otpPolicyAlgorithm Gets Ignored</h2>
<p>The <code>otpPolicyAlgorithm</code> field is ignored when:</p>
<ol>
<li><strong>Incomplete OTP Policy Configuration</strong>: Setting only one field without others causes Keycloak to use default values</li>
<li><strong>Missing Required Fields</strong>: OTP policy requires a complete set of related fields to be valid</li>
<li><strong>Type Mismatch</strong>: Using <code>hotp</code> type without proper counter configuration</li>
<li><strong>Implicit Defaults</strong>: Keycloak applies defaults when the policy is partially configured</li>
</ol>
<h2 id="usage">Usage</h2>
<h3 id="complete-otp-policy-configuration-totp">Complete OTP Policy Configuration (TOTP)</h3>
<p><strong>Scenario:</strong> Configure a realm to use SHA-256 algorithm for TOTP with 6-digit codes.
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<p><strong>Result:</strong> 
- TOTP uses HmacSHA256 algorithm
- Generates 6-digit codes
- 30-second validity window
- Looks ahead 1 time window for validation</p>
<p><strong>Important:</strong> All OTP policy fields should be specified together for consistent behavior.</p>
<hr />
<h3 id="incomplete-configuration-problematic">Incomplete Configuration (Problematic)</h3>
<p><strong>Scenario:</strong> Attempting to change only the algorithm.</p>
<p><strong>Problematic Configuration:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Only this field set</span>
</code></pre></div></p>
<p><strong>What happens:</strong>
- The <code>otpPolicyAlgorithm</code> may be ignored
- Keycloak uses default values for other fields
- Results in inconsistent OTP configuration
- May revert to default HmacSHA1 algorithm</p>
<p><strong>Why it fails:</strong> Keycloak's OTP policy expects a complete configuration. Partial updates may not be applied correctly.</p>
<hr />
<h3 id="hotp-configuration">HOTP Configuration</h3>
<p><strong>Scenario:</strong> Configure HMAC-based OTP instead of time-based.
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA1&quot;</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div></p>
<p><strong>Result:</strong>
- Uses counter-based OTP (HOTP)
- HmacSHA1 algorithm
- 6-digit codes
- Looks ahead 10 counter values for validation</p>
<p><strong>Note:</strong> For HOTP, the <code>otpPolicyPeriod</code> field is not used.</p>
<hr />
<h3 id="high-security-otp-configuration">High Security OTP Configuration</h3>
<p><strong>Scenario:</strong> Maximum security setup with SHA-512 and 8-digit codes.
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA512&quot;</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-3-7" name="__codelineno-3-7" href="#__codelineno-3-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<a id="__codelineno-3-8" name="__codelineno-3-8" href="#__codelineno-3-8"></a><span class="nt">otpPolicySupportedApplications</span><span class="p">:</span>
<a id="__codelineno-3-9" name="__codelineno-3-9" href="#__codelineno-3-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppFreeOTPName&quot;</span>
<a id="__codelineno-3-10" name="__codelineno-3-10" href="#__codelineno-3-10"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppGoogleName&quot;</span>
</code></pre></div></p>
<p><strong>Result:</strong>
- Most secure hash algorithm (SHA-512)
- 8-digit codes for additional security
- Compatible with Google Authenticator and FreeOTP</p>
<hr />
<h2 id="otp-policy-fields-reference">OTP Policy Fields Reference</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Values</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>otpPolicyType</code></td>
<td>String</td>
<td><code>totp</code>, <code>hotp</code></td>
<td>Type of OTP</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyAlgorithm</code></td>
<td>String</td>
<td><code>HmacSHA1</code>, <code>HmacSHA256</code>, <code>HmacSHA512</code></td>
<td>Hash algorithm</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyDigits</code></td>
<td>Integer</td>
<td><code>6</code>, <code>8</code></td>
<td>Number of digits in OTP</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyInitialCounter</code></td>
<td>Integer</td>
<td><code>0</code> or higher</td>
<td>Initial counter (mainly for HOTP)</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyLookAheadWindow</code></td>
<td>Integer</td>
<td><code>1</code> or higher</td>
<td>Validation window size</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyPeriod</code></td>
<td>Integer</td>
<td><code>30</code> (seconds)</td>
<td>TOTP time window</td>
<td>For TOTP</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="common-pitfalls">Common Pitfalls</h2>
<h3 id="1-setting-only-algorithm">1. Setting Only Algorithm</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="c1"># Other fields missing</span>
</code></pre></div></p>
<p><strong>What happens:</strong> Algorithm change is ignored, other fields use defaults.</p>
<p><strong>Solution:</strong> Always specify all OTP policy fields together:
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-5-7" name="__codelineno-5-7" href="#__codelineno-5-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<hr />
<h3 id="2-mixing-totp-and-hotp-settings">2. Mixing TOTP and HOTP Settings</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-6-3" name="__codelineno-6-3" href="#__codelineno-6-3"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># Period is for TOTP, not HOTP</span>
</code></pre></div></p>
<p><strong>What happens:</strong> Conflicting configuration, unpredictable behavior.</p>
<p><strong>Solution:</strong> Use appropriate fields for the OTP type:</p>
<p><strong>For TOTP:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># Include period</span>
</code></pre></div></p>
<p><strong>For HOTP:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="c1"># Don&#39;t include otpPolicyPeriod</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">  </span><span class="c1"># Important for HOTP</span>
</code></pre></div></p>
<hr />
<h3 id="3-incorrect-algorithm-names">3. Incorrect Algorithm Names</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SHA256&quot;</span><span class="w">  </span><span class="c1"># Wrong!</span>
</code></pre></div></p>
<p><strong>Correct values:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Correct</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="c1"># or</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA1&quot;</span><span class="w">    </span><span class="c1"># Correct</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="c1"># or</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA512&quot;</span><span class="w">  </span><span class="c1"># Correct</span>
</code></pre></div></p>
<p><strong>Note:</strong> Must include the <code>Hmac</code> prefix.</p>
<hr />
<h3 id="4-exporting-and-missing-fields">4. Exporting and Missing Fields</h3>
<p><strong>Problem:</strong> Exporting a realm and re-importing without all OTP policy fields.</p>
<p><strong>When exporting:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1" href="#__codelineno-11-1"></a><span class="p">{</span>
<a id="__codelineno-11-2" name="__codelineno-11-2" href="#__codelineno-11-2"></a><span class="w">  </span><span class="nt">&quot;realm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;myrealm&quot;</span><span class="p">,</span>
<a id="__codelineno-11-3" name="__codelineno-11-3" href="#__codelineno-11-3"></a><span class="w">  </span><span class="nt">&quot;otpPolicyAlgorithm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HmacSHA256&quot;</span><span class="p">,</span>
<a id="__codelineno-11-4" name="__codelineno-11-4" href="#__codelineno-11-4"></a><span class="w">  </span><span class="c1">// Other fields may be missing from export</span>
<a id="__codelineno-11-5" name="__codelineno-11-5" href="#__codelineno-11-5"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Solution:</strong> Ensure exported configuration includes all OTP policy fields, or add them manually:
<div class="highlight"><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1" href="#__codelineno-12-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-12-2" name="__codelineno-12-2" href="#__codelineno-12-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-12-3" name="__codelineno-12-3" href="#__codelineno-12-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-12-4" name="__codelineno-12-4" href="#__codelineno-12-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-12-5" name="__codelineno-12-5" href="#__codelineno-12-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-12-6" name="__codelineno-12-6" href="#__codelineno-12-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-12-7" name="__codelineno-12-7" href="#__codelineno-12-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<hr />
<h2 id="best-practices">Best Practices</h2>
<ol>
<li><strong>Always Configure Complete OTP Policy</strong>: Include all related fields in a single configuration block</li>
<li><strong>Use Standard Values First</strong>: Start with standard settings (SHA256, 6 digits, 30 seconds) unless security requirements dictate otherwise</li>
<li><strong>Document Your Choices</strong>: Add comments explaining why specific OTP settings were chosen</li>
<li><strong>Test Authentication</strong>: After applying OTP policy changes, test with authenticator apps (Google Authenticator, FreeOTP)</li>
<li><strong>Version Control</strong>: Store OTP policy configurations in version control to track security policy changes</li>
<li><strong>Coordinate with Users</strong>: Changing OTP settings may require users to re-register their authenticators</li>
</ol>
<hr />
<h2 id="configuration-template">Configuration Template</h2>
<p>Here's a complete template for OTP policy configuration:
<div class="highlight"><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1" href="#__codelineno-13-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-13-2" name="__codelineno-13-2" href="#__codelineno-13-2"></a><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-13-3" name="__codelineno-13-3" href="#__codelineno-13-3"></a>
<a id="__codelineno-13-4" name="__codelineno-13-4" href="#__codelineno-13-4"></a><span class="c1"># OTP Policy Configuration</span>
<a id="__codelineno-13-5" name="__codelineno-13-5" href="#__codelineno-13-5"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span><span class="w">                    </span><span class="c1"># totp or hotp</span>
<a id="__codelineno-13-6" name="__codelineno-13-6" href="#__codelineno-13-6"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">         </span><span class="c1"># HmacSHA1, HmacSHA256, or HmacSHA512</span>
<a id="__codelineno-13-7" name="__codelineno-13-7" href="#__codelineno-13-7"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span><span class="w">                       </span><span class="c1"># 6 or 8</span>
<a id="__codelineno-13-8" name="__codelineno-13-8" href="#__codelineno-13-8"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">               </span><span class="c1"># Starting counter</span>
<a id="__codelineno-13-9" name="__codelineno-13-9" href="#__codelineno-13-9"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">              </span><span class="c1"># Validation window</span>
<a id="__codelineno-13-10" name="__codelineno-13-10" href="#__codelineno-13-10"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">                      </span><span class="c1"># Time window in seconds (TOTP only)</span>
<a id="__codelineno-13-11" name="__codelineno-13-11" href="#__codelineno-13-11"></a>
<a id="__codelineno-13-12" name="__codelineno-13-12" href="#__codelineno-13-12"></a><span class="c1"># Optional: Specify supported authenticator apps</span>
<a id="__codelineno-13-13" name="__codelineno-13-13" href="#__codelineno-13-13"></a><span class="nt">otpPolicySupportedApplications</span><span class="p">:</span>
<a id="__codelineno-13-14" name="__codelineno-13-14" href="#__codelineno-13-14"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppFreeOTPName&quot;</span>
<a id="__codelineno-13-15" name="__codelineno-13-15" href="#__codelineno-13-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppGoogleName&quot;</span>
<a id="__codelineno-13-16" name="__codelineno-13-16" href="#__codelineno-13-16"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppMicrosoftAuthenticatorName&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="verifying-otp-policy-configuration">Verifying OTP Policy Configuration</h2>
<p>After applying the configuration, verify in Keycloak Admin Console:</p>
<ol>
<li>Navigate to: <strong>Realm Settings</strong>  <strong>Security defenses</strong>  <strong>OTP Policy</strong></li>
<li>Verify all settings match your configuration:</li>
<li>OTP Type</li>
<li>OTP Hash Algorithm</li>
<li>Number of Digits</li>
<li>Look Ahead Window</li>
<li>OTP Token Period</li>
</ol>
<hr />
<h2 id="algorithm-comparison">Algorithm Comparison</h2>
<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Security Level</th>
<th>Compatibility</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td>HmacSHA1</td>
<td>Basic</td>
<td>Universal</td>
<td>Legacy systems only</td>
</tr>
<tr>
<td>HmacSHA256</td>
<td>Strong</td>
<td>Modern apps</td>
<td><strong>Recommended</strong></td>
</tr>
<tr>
<td>HmacSHA512</td>
<td>Maximum</td>
<td>Modern apps</td>
<td>High security environments</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="migration-guide">Migration Guide</h2>
<h3 id="from-sha1-to-sha256">From SHA1 to SHA256</h3>
<p><strong>Scenario:</strong> Upgrading from legacy SHA1 to more secure SHA256.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Announce the change</strong> to users (they'll need to re-register authenticators)</p>
</li>
<li>
<p><strong>Update configuration:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1" href="#__codelineno-14-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-14-2" name="__codelineno-14-2" href="#__codelineno-14-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-14-3" name="__codelineno-14-3" href="#__codelineno-14-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Changed from HmacSHA1</span>
<a id="__codelineno-14-4" name="__codelineno-14-4" href="#__codelineno-14-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-14-5" name="__codelineno-14-5" href="#__codelineno-14-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-14-6" name="__codelineno-14-6" href="#__codelineno-14-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-14-7" name="__codelineno-14-7" href="#__codelineno-14-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Apply the configuration</strong> using keycloak-config-cli</p>
</li>
<li>
<p><strong>Communicate to users:</strong></p>
</li>
<li>Existing OTP credentials will need to be re-configured</li>
<li>Users must remove old authenticator entries</li>
<li>Users must re-scan QR code with authenticator app</li>
</ol>
<p><strong>Important:</strong> This is a breaking change for existing users. Plan accordingly.</p>
<hr />
<h2 id="troubleshooting">Troubleshooting</h2>
<h3 id="otp-algorithm-not-applying">OTP Algorithm Not Applying</h3>
<p><strong>Symptom:</strong> After import, OTP algorithm remains as default (HmacSHA1)</p>
<p><strong>Diagnosis:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1" href="#__codelineno-15-1"></a><span class="c1"># Check realm configuration</span>
<a id="__codelineno-15-2" name="__codelineno-15-2" href="#__codelineno-15-2"></a>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;http://localhost:8080/admin/realms/myrealm&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-15-3" name="__codelineno-15-3" href="#__codelineno-15-3"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.otpPolicy&#39;</span>
</code></pre></div></p>
<p><strong>Possible causes:</strong>
1. Incomplete OTP policy configuration
2. Missing required fields
3. Configuration file not being imported
4. Import validation errors</p>
<p><strong>Solution:</strong> Use complete OTP policy configuration with all fields.</p>
<hr />
<h3 id="users-cant-authenticate-after-otp-change">Users Can't Authenticate After OTP Change</h3>
<p><strong>Symptom:</strong> Users receive "Invalid authenticator code" errors</p>
<p><strong>Cause:</strong> OTP algorithm change requires users to re-register their authenticators</p>
<p><strong>Solution:</strong>
1. Users must delete old authenticator entry
2. In Keycloak, remove old OTP credential
3. User re-registers with new QR code
4. Test authentication with new code</p>
<hr />
<h2 id="configuration-options">Configuration Options</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1" href="#__codelineno-16-1"></a><span class="c1"># Validate configuration before import</span>
<a id="__codelineno-16-2" name="__codelineno-16-2" href="#__codelineno-16-2"></a>--import.validate<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-16-3" name="__codelineno-16-3" href="#__codelineno-16-3"></a>
<a id="__codelineno-16-4" name="__codelineno-16-4" href="#__codelineno-16-4"></a><span class="c1"># Check what will be changed</span>
<a id="__codelineno-16-5" name="__codelineno-16-5" href="#__codelineno-16-5"></a>--import.remote-state.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<hr />
<h2 id="consequences">Consequences</h2>
<p>When configuring OTP policies in keycloak-config-cli:</p>
<ol>
<li><strong>Complete Configuration Required</strong>: All OTP policy fields must be specified together for changes to apply correctly</li>
<li><strong>Algorithm Changes Break Existing Credentials</strong>: Users must re-register authenticators after algorithm changes</li>
<li><strong>Type Changes Are Disruptive</strong>: Switching between TOTP and HOTP requires user action</li>
<li><strong>Defaults May Override</strong>: Partial configurations may result in unexpected default values being applied</li>
<li><strong>No Backward Compatibility</strong>: Old authenticator entries won't work after policy changes</li>
</ol>
<hr />
<h2 id="security-considerations">Security Considerations</h2>
<ol>
<li><strong>SHA1 is Deprecated</strong>: Avoid HmacSHA1 for new deployments; considered weak by modern standards</li>
<li><strong>8-digit Codes</strong>: More secure but less user-friendly; use for high-security environments</li>
<li><strong>Period Duration</strong>: 30 seconds is standard; shorter periods increase security but reduce usability</li>
<li><strong>Look Ahead Window</strong>: Larger windows reduce failed authentications but slightly decrease security</li>
</ol>
<hr />
<h2 id="related-issues">Related Issues</h2>
<ul>
<li><a href="https://github.com/adorsys/keycloak-config-cli/issues/847">#847 - otpPolicyAlgorithm ignored</a></li>
</ul>
<hr />
<h2 id="additional-resources">Additional Resources</h2>
<ul>
<li><a href="https://www.keycloak.org/docs/latest/server_admin/#otp-policies">Keycloak OTP Policy Documentation</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc6238">TOTP RFC 6238</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4226">HOTP RFC 4226</a></li>
<li><a href="../../import-settings/">Import Configuration</a># OTP Policy Configuration</li>
</ul>
<p>When configuring One-Time Password (OTP) policies in Keycloak realms, users often encounter issues where certain OTP policy settings appear to be ignored during import. Understanding how to properly configure OTP policies in keycloak-config-cli is essential for ensuring multi-factor authentication works as expected.</p>
<p>Related issues: <a href="https://github.com/adorsys/keycloak-config-cli/issues/847">#847</a></p>
<h2 id="the-problem_1">The Problem</h2>
<p>Users often encounter confusion when configuring OTP policies because:
- Setting only <code>otpPolicyAlgorithm</code> in the configuration doesn't apply the change
- Some OTP policy fields appear to be ignored during import
- It's unclear which OTP policy fields must be configured together
- Default values may override explicitly set values if the configuration is incomplete
- The relationship between different OTP policy settings is not obvious</p>
<h2 id="what-is-otp-policy_1">What is OTP Policy?</h2>
<p>OTP (One-Time Password) policy in Keycloak controls how Time-based One-Time Passwords (TOTP) and HMAC-based One-Time Passwords (HOTP) are generated and validated for multi-factor authentication.</p>
<p><strong>Key OTP Policy Settings:</strong>
- <strong>Algorithm</strong>: Hash algorithm used (HmacSHA1, HmacSHA256, HmacSHA512)
- <strong>Digits</strong>: Number of digits in the OTP (6 or 8)
- <strong>Period</strong>: Time window for TOTP validity (in seconds)
- <strong>Initial Counter</strong>: Starting counter value for HOTP
- <strong>Look Ahead Window</strong>: Number of intervals to check for validation</p>
<h2 id="why-otppolicyalgorithm-gets-ignored_1">Why otpPolicyAlgorithm Gets Ignored</h2>
<p>The <code>otpPolicyAlgorithm</code> field is ignored when:</p>
<ol>
<li><strong>Incomplete OTP Policy Configuration</strong>: Setting only one field without others causes Keycloak to use default values</li>
<li><strong>Missing Required Fields</strong>: OTP policy requires a complete set of related fields to be valid</li>
<li><strong>Type Mismatch</strong>: Using <code>hotp</code> type without proper counter configuration</li>
<li><strong>Implicit Defaults</strong>: Keycloak applies defaults when the policy is partially configured</li>
</ol>
<h2 id="usage_1">Usage</h2>
<h3 id="complete-otp-policy-configuration-totp_1">Complete OTP Policy Configuration (TOTP)</h3>
<p><strong>Scenario:</strong> Configure a realm to use SHA-256 algorithm for TOTP with 6-digit codes.
<div class="highlight"><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1" href="#__codelineno-17-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-17-2" name="__codelineno-17-2" href="#__codelineno-17-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-17-3" name="__codelineno-17-3" href="#__codelineno-17-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-17-4" name="__codelineno-17-4" href="#__codelineno-17-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-17-5" name="__codelineno-17-5" href="#__codelineno-17-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-17-6" name="__codelineno-17-6" href="#__codelineno-17-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-17-7" name="__codelineno-17-7" href="#__codelineno-17-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<p><strong>Result:</strong> 
- TOTP uses HmacSHA256 algorithm
- Generates 6-digit codes
- 30-second validity window
- Looks ahead 1 time window for validation</p>
<p><strong>Important:</strong> All OTP policy fields should be specified together for consistent behavior.</p>
<hr />
<h3 id="incomplete-configuration-problematic_1">Incomplete Configuration (Problematic)</h3>
<p><strong>Scenario:</strong> Attempting to change only the algorithm.</p>
<p><strong>Problematic Configuration:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1" href="#__codelineno-18-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-18-2" name="__codelineno-18-2" href="#__codelineno-18-2"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Only this field set</span>
</code></pre></div></p>
<p><strong>What happens:</strong>
- The <code>otpPolicyAlgorithm</code> may be ignored
- Keycloak uses default values for other fields
- Results in inconsistent OTP configuration
- May revert to default HmacSHA1 algorithm</p>
<p><strong>Why it fails:</strong> Keycloak's OTP policy expects a complete configuration. Partial updates may not be applied correctly.</p>
<hr />
<h3 id="hotp-configuration_1">HOTP Configuration</h3>
<p><strong>Scenario:</strong> Configure HMAC-based OTP instead of time-based.
<div class="highlight"><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1" href="#__codelineno-19-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-19-2" name="__codelineno-19-2" href="#__codelineno-19-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-19-3" name="__codelineno-19-3" href="#__codelineno-19-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA1&quot;</span>
<a id="__codelineno-19-4" name="__codelineno-19-4" href="#__codelineno-19-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-19-5" name="__codelineno-19-5" href="#__codelineno-19-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-19-6" name="__codelineno-19-6" href="#__codelineno-19-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span>
</code></pre></div></p>
<p><strong>Result:</strong>
- Uses counter-based OTP (HOTP)
- HmacSHA1 algorithm
- 6-digit codes
- Looks ahead 10 counter values for validation</p>
<p><strong>Note:</strong> For HOTP, the <code>otpPolicyPeriod</code> field is not used.</p>
<hr />
<h3 id="high-security-otp-configuration_1">High Security OTP Configuration</h3>
<p><strong>Scenario:</strong> Maximum security setup with SHA-512 and 8-digit codes.
<div class="highlight"><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1" href="#__codelineno-20-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-20-2" name="__codelineno-20-2" href="#__codelineno-20-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-20-3" name="__codelineno-20-3" href="#__codelineno-20-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA512&quot;</span>
<a id="__codelineno-20-4" name="__codelineno-20-4" href="#__codelineno-20-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">8</span>
<a id="__codelineno-20-5" name="__codelineno-20-5" href="#__codelineno-20-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-20-6" name="__codelineno-20-6" href="#__codelineno-20-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-20-7" name="__codelineno-20-7" href="#__codelineno-20-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
<a id="__codelineno-20-8" name="__codelineno-20-8" href="#__codelineno-20-8"></a><span class="nt">otpPolicySupportedApplications</span><span class="p">:</span>
<a id="__codelineno-20-9" name="__codelineno-20-9" href="#__codelineno-20-9"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppFreeOTPName&quot;</span>
<a id="__codelineno-20-10" name="__codelineno-20-10" href="#__codelineno-20-10"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppGoogleName&quot;</span>
</code></pre></div></p>
<p><strong>Result:</strong>
- Most secure hash algorithm (SHA-512)
- 8-digit codes for additional security
- Compatible with Google Authenticator and FreeOTP</p>
<hr />
<h2 id="otp-policy-fields-reference_1">OTP Policy Fields Reference</h2>
<table>
<thead>
<tr>
<th>Field</th>
<th>Type</th>
<th>Values</th>
<th>Description</th>
<th>Required</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>otpPolicyType</code></td>
<td>String</td>
<td><code>totp</code>, <code>hotp</code></td>
<td>Type of OTP</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyAlgorithm</code></td>
<td>String</td>
<td><code>HmacSHA1</code>, <code>HmacSHA256</code>, <code>HmacSHA512</code></td>
<td>Hash algorithm</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyDigits</code></td>
<td>Integer</td>
<td><code>6</code>, <code>8</code></td>
<td>Number of digits in OTP</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyInitialCounter</code></td>
<td>Integer</td>
<td><code>0</code> or higher</td>
<td>Initial counter (mainly for HOTP)</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyLookAheadWindow</code></td>
<td>Integer</td>
<td><code>1</code> or higher</td>
<td>Validation window size</td>
<td>Yes</td>
</tr>
<tr>
<td><code>otpPolicyPeriod</code></td>
<td>Integer</td>
<td><code>30</code> (seconds)</td>
<td>TOTP time window</td>
<td>For TOTP</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="common-pitfalls_1">Common Pitfalls</h2>
<h3 id="1-setting-only-algorithm_1">1. Setting Only Algorithm</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1" href="#__codelineno-21-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-21-2" name="__codelineno-21-2" href="#__codelineno-21-2"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-21-3" name="__codelineno-21-3" href="#__codelineno-21-3"></a><span class="c1"># Other fields missing</span>
</code></pre></div></p>
<p><strong>What happens:</strong> Algorithm change is ignored, other fields use defaults.</p>
<p><strong>Solution:</strong> Always specify all OTP policy fields together:
<div class="highlight"><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1" href="#__codelineno-22-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-22-2" name="__codelineno-22-2" href="#__codelineno-22-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-22-3" name="__codelineno-22-3" href="#__codelineno-22-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-22-4" name="__codelineno-22-4" href="#__codelineno-22-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-22-5" name="__codelineno-22-5" href="#__codelineno-22-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-22-6" name="__codelineno-22-6" href="#__codelineno-22-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-22-7" name="__codelineno-22-7" href="#__codelineno-22-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<hr />
<h3 id="2-mixing-totp-and-hotp-settings_1">2. Mixing TOTP and HOTP Settings</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1" href="#__codelineno-23-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-23-2" name="__codelineno-23-2" href="#__codelineno-23-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-23-3" name="__codelineno-23-3" href="#__codelineno-23-3"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># Period is for TOTP, not HOTP</span>
</code></pre></div></p>
<p><strong>What happens:</strong> Conflicting configuration, unpredictable behavior.</p>
<p><strong>Solution:</strong> Use appropriate fields for the OTP type:</p>
<p><strong>For TOTP:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1" href="#__codelineno-24-1"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-24-2" name="__codelineno-24-2" href="#__codelineno-24-2"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">  </span><span class="c1"># Include period</span>
</code></pre></div></p>
<p><strong>For HOTP:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-25-1" name="__codelineno-25-1" href="#__codelineno-25-1"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;hotp&quot;</span>
<a id="__codelineno-25-2" name="__codelineno-25-2" href="#__codelineno-25-2"></a><span class="c1"># Don&#39;t include otpPolicyPeriod</span>
<a id="__codelineno-25-3" name="__codelineno-25-3" href="#__codelineno-25-3"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">10</span><span class="w">  </span><span class="c1"># Important for HOTP</span>
</code></pre></div></p>
<hr />
<h3 id="3-incorrect-algorithm-names_1">3. Incorrect Algorithm Names</h3>
<p><strong>Problem:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-26-1" name="__codelineno-26-1" href="#__codelineno-26-1"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;SHA256&quot;</span><span class="w">  </span><span class="c1"># Wrong!</span>
</code></pre></div></p>
<p><strong>Correct values:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-27-1" name="__codelineno-27-1" href="#__codelineno-27-1"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Correct</span>
<a id="__codelineno-27-2" name="__codelineno-27-2" href="#__codelineno-27-2"></a><span class="c1"># or</span>
<a id="__codelineno-27-3" name="__codelineno-27-3" href="#__codelineno-27-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA1&quot;</span><span class="w">    </span><span class="c1"># Correct</span>
<a id="__codelineno-27-4" name="__codelineno-27-4" href="#__codelineno-27-4"></a><span class="c1"># or</span>
<a id="__codelineno-27-5" name="__codelineno-27-5" href="#__codelineno-27-5"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA512&quot;</span><span class="w">  </span><span class="c1"># Correct</span>
</code></pre></div></p>
<p><strong>Note:</strong> Must include the <code>Hmac</code> prefix.</p>
<hr />
<h3 id="4-exporting-and-missing-fields_1">4. Exporting and Missing Fields</h3>
<p><strong>Problem:</strong> Exporting a realm and re-importing without all OTP policy fields.</p>
<p><strong>When exporting:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-28-1" name="__codelineno-28-1" href="#__codelineno-28-1"></a><span class="p">{</span>
<a id="__codelineno-28-2" name="__codelineno-28-2" href="#__codelineno-28-2"></a><span class="w">  </span><span class="nt">&quot;realm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;myrealm&quot;</span><span class="p">,</span>
<a id="__codelineno-28-3" name="__codelineno-28-3" href="#__codelineno-28-3"></a><span class="w">  </span><span class="nt">&quot;otpPolicyAlgorithm&quot;</span><span class="p">:</span><span class="w"> </span><span class="s2">&quot;HmacSHA256&quot;</span><span class="p">,</span>
<a id="__codelineno-28-4" name="__codelineno-28-4" href="#__codelineno-28-4"></a><span class="w">  </span><span class="c1">// Other fields may be missing from export</span>
<a id="__codelineno-28-5" name="__codelineno-28-5" href="#__codelineno-28-5"></a><span class="p">}</span>
</code></pre></div></p>
<p><strong>Solution:</strong> Ensure exported configuration includes all OTP policy fields, or add them manually:
<div class="highlight"><pre><span></span><code><a id="__codelineno-29-1" name="__codelineno-29-1" href="#__codelineno-29-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-29-2" name="__codelineno-29-2" href="#__codelineno-29-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-29-3" name="__codelineno-29-3" href="#__codelineno-29-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span>
<a id="__codelineno-29-4" name="__codelineno-29-4" href="#__codelineno-29-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-29-5" name="__codelineno-29-5" href="#__codelineno-29-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-29-6" name="__codelineno-29-6" href="#__codelineno-29-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-29-7" name="__codelineno-29-7" href="#__codelineno-29-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
<hr />
<h2 id="best-practices_1">Best Practices</h2>
<ol>
<li><strong>Always Configure Complete OTP Policy</strong>: Include all related fields in a single configuration block</li>
<li><strong>Use Standard Values First</strong>: Start with standard settings (SHA256, 6 digits, 30 seconds) unless security requirements dictate otherwise</li>
<li><strong>Document Your Choices</strong>: Add comments explaining why specific OTP settings were chosen</li>
<li><strong>Test Authentication</strong>: After applying OTP policy changes, test with authenticator apps (Google Authenticator, FreeOTP)</li>
<li><strong>Version Control</strong>: Store OTP policy configurations in version control to track security policy changes</li>
<li><strong>Coordinate with Users</strong>: Changing OTP settings may require users to re-register their authenticators</li>
</ol>
<hr />
<h2 id="configuration-template_1">Configuration Template</h2>
<p>Here's a complete template for OTP policy configuration:
<div class="highlight"><pre><span></span><code><a id="__codelineno-30-1" name="__codelineno-30-1" href="#__codelineno-30-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-30-2" name="__codelineno-30-2" href="#__codelineno-30-2"></a><span class="nt">enabled</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">true</span>
<a id="__codelineno-30-3" name="__codelineno-30-3" href="#__codelineno-30-3"></a>
<a id="__codelineno-30-4" name="__codelineno-30-4" href="#__codelineno-30-4"></a><span class="c1"># OTP Policy Configuration</span>
<a id="__codelineno-30-5" name="__codelineno-30-5" href="#__codelineno-30-5"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span><span class="w">                    </span><span class="c1"># totp or hotp</span>
<a id="__codelineno-30-6" name="__codelineno-30-6" href="#__codelineno-30-6"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">         </span><span class="c1"># HmacSHA1, HmacSHA256, or HmacSHA512</span>
<a id="__codelineno-30-7" name="__codelineno-30-7" href="#__codelineno-30-7"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span><span class="w">                       </span><span class="c1"># 6 or 8</span>
<a id="__codelineno-30-8" name="__codelineno-30-8" href="#__codelineno-30-8"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span><span class="w">               </span><span class="c1"># Starting counter</span>
<a id="__codelineno-30-9" name="__codelineno-30-9" href="#__codelineno-30-9"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span><span class="w">              </span><span class="c1"># Validation window</span>
<a id="__codelineno-30-10" name="__codelineno-30-10" href="#__codelineno-30-10"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span><span class="w">                      </span><span class="c1"># Time window in seconds (TOTP only)</span>
<a id="__codelineno-30-11" name="__codelineno-30-11" href="#__codelineno-30-11"></a>
<a id="__codelineno-30-12" name="__codelineno-30-12" href="#__codelineno-30-12"></a><span class="c1"># Optional: Specify supported authenticator apps</span>
<a id="__codelineno-30-13" name="__codelineno-30-13" href="#__codelineno-30-13"></a><span class="nt">otpPolicySupportedApplications</span><span class="p">:</span>
<a id="__codelineno-30-14" name="__codelineno-30-14" href="#__codelineno-30-14"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppFreeOTPName&quot;</span>
<a id="__codelineno-30-15" name="__codelineno-30-15" href="#__codelineno-30-15"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppGoogleName&quot;</span>
<a id="__codelineno-30-16" name="__codelineno-30-16" href="#__codelineno-30-16"></a><span class="w">  </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="s">&quot;totpAppMicrosoftAuthenticatorName&quot;</span>
</code></pre></div></p>
<hr />
<h2 id="verifying-otp-policy-configuration_1">Verifying OTP Policy Configuration</h2>
<p>After applying the configuration, verify in Keycloak Admin Console:</p>
<ol>
<li>Navigate to: <strong>Realm Settings</strong>  <strong>Security defenses</strong>  <strong>OTP Policy</strong></li>
<li>Verify all settings match your configuration:</li>
<li>OTP Type</li>
<li>OTP Hash Algorithm</li>
<li>Number of Digits</li>
<li>Look Ahead Window</li>
<li>OTP Token Period</li>
</ol>
<hr />
<h2 id="algorithm-comparison_1">Algorithm Comparison</h2>
<table>
<thead>
<tr>
<th>Algorithm</th>
<th>Security Level</th>
<th>Compatibility</th>
<th>Recommendation</th>
</tr>
</thead>
<tbody>
<tr>
<td>HmacSHA1</td>
<td>Basic</td>
<td>Universal</td>
<td>Legacy systems only</td>
</tr>
<tr>
<td>HmacSHA256</td>
<td>Strong</td>
<td>Modern apps</td>
<td><strong>Recommended</strong></td>
</tr>
<tr>
<td>HmacSHA512</td>
<td>Maximum</td>
<td>Modern apps</td>
<td>High security environments</td>
</tr>
</tbody>
</table>
<hr />
<h2 id="migration-guide_1">Migration Guide</h2>
<h3 id="from-sha1-to-sha256_1">From SHA1 to SHA256</h3>
<p><strong>Scenario:</strong> Upgrading from legacy SHA1 to more secure SHA256.</p>
<p><strong>Steps:</strong></p>
<ol>
<li>
<p><strong>Announce the change</strong> to users (they'll need to re-register authenticators)</p>
</li>
<li>
<p><strong>Update configuration:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-31-1" name="__codelineno-31-1" href="#__codelineno-31-1"></a><span class="nt">realm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;myrealm&quot;</span>
<a id="__codelineno-31-2" name="__codelineno-31-2" href="#__codelineno-31-2"></a><span class="nt">otpPolicyType</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;totp&quot;</span>
<a id="__codelineno-31-3" name="__codelineno-31-3" href="#__codelineno-31-3"></a><span class="nt">otpPolicyAlgorithm</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;HmacSHA256&quot;</span><span class="w">  </span><span class="c1"># Changed from HmacSHA1</span>
<a id="__codelineno-31-4" name="__codelineno-31-4" href="#__codelineno-31-4"></a><span class="nt">otpPolicyDigits</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">6</span>
<a id="__codelineno-31-5" name="__codelineno-31-5" href="#__codelineno-31-5"></a><span class="nt">otpPolicyInitialCounter</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">0</span>
<a id="__codelineno-31-6" name="__codelineno-31-6" href="#__codelineno-31-6"></a><span class="nt">otpPolicyLookAheadWindow</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">1</span>
<a id="__codelineno-31-7" name="__codelineno-31-7" href="#__codelineno-31-7"></a><span class="nt">otpPolicyPeriod</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">30</span>
</code></pre></div></p>
</li>
<li>
<p><strong>Apply the configuration</strong> using keycloak-config-cli</p>
</li>
<li>
<p><strong>Communicate to users:</strong></p>
</li>
<li>Existing OTP credentials will need to be re-configured</li>
<li>Users must remove old authenticator entries</li>
<li>Users must re-scan QR code with authenticator app</li>
</ol>
<p><strong>Important:</strong> This is a breaking change for existing users. Plan accordingly.</p>
<hr />
<h2 id="troubleshooting_1">Troubleshooting</h2>
<h3 id="otp-algorithm-not-applying_1">OTP Algorithm Not Applying</h3>
<p><strong>Symptom:</strong> After import, OTP algorithm remains as default (HmacSHA1)</p>
<p><strong>Diagnosis:</strong>
<div class="highlight"><pre><span></span><code><a id="__codelineno-32-1" name="__codelineno-32-1" href="#__codelineno-32-1"></a><span class="c1"># Check realm configuration</span>
<a id="__codelineno-32-2" name="__codelineno-32-2" href="#__codelineno-32-2"></a>curl<span class="w"> </span>-s<span class="w"> </span><span class="s2">&quot;http://localhost:8080/admin/realms/myrealm&quot;</span><span class="w"> </span><span class="se">\</span>
<a id="__codelineno-32-3" name="__codelineno-32-3" href="#__codelineno-32-3"></a><span class="w">  </span>-H<span class="w"> </span><span class="s2">&quot;Authorization: Bearer </span><span class="nv">$TOKEN</span><span class="s2">&quot;</span><span class="w"> </span><span class="p">|</span><span class="w"> </span>jq<span class="w"> </span><span class="s1">&#39;.otpPolicy&#39;</span>
</code></pre></div></p>
<p><strong>Possible causes:</strong>
1. Incomplete OTP policy configuration
2. Missing required fields
3. Configuration file not being imported
4. Import validation errors</p>
<p><strong>Solution:</strong> Use complete OTP policy configuration with all fields.</p>
<hr />
<h3 id="users-cant-authenticate-after-otp-change_1">Users Can't Authenticate After OTP Change</h3>
<p><strong>Symptom:</strong> Users receive "Invalid authenticator code" errors</p>
<p><strong>Cause:</strong> OTP algorithm change requires users to re-register their authenticators</p>
<p><strong>Solution:</strong>
1. Users must delete old authenticator entry
2. In Keycloak, remove old OTP credential
3. User re-registers with new QR code
4. Test authentication with new code</p>
<hr />
<h2 id="configuration-options_1">Configuration Options</h2>
<div class="highlight"><pre><span></span><code><a id="__codelineno-33-1" name="__codelineno-33-1" href="#__codelineno-33-1"></a><span class="c1"># Validate configuration before import</span>
<a id="__codelineno-33-2" name="__codelineno-33-2" href="#__codelineno-33-2"></a>--import.validate<span class="o">=</span><span class="nb">true</span>
<a id="__codelineno-33-3" name="__codelineno-33-3" href="#__codelineno-33-3"></a>
<a id="__codelineno-33-4" name="__codelineno-33-4" href="#__codelineno-33-4"></a><span class="c1"># Check what will be changed</span>
<a id="__codelineno-33-5" name="__codelineno-33-5" href="#__codelineno-33-5"></a>--import.remote-state.enabled<span class="o">=</span><span class="nb">true</span>
</code></pre></div>
<hr />
<h2 id="consequences_1">Consequences</h2>
<p>When configuring OTP policies in keycloak-config-cli:</p>
<ol>
<li><strong>Complete Configuration Required</strong>: All OTP policy fields must be specified together for changes to apply correctly</li>
<li><strong>Algorithm Changes Break Existing Credentials</strong>: Users must re-register authenticators after algorithm changes</li>
<li><strong>Type Changes Are Disruptive</strong>: Switching between TOTP and HOTP requires user action</li>
<li><strong>Defaults May Override</strong>: Partial configurations may result in unexpected default values being applied</li>
<li><strong>No Backward Compatibility</strong>: Old authenticator entries won't work after policy changes</li>
</ol>
<hr />
<h2 id="security-considerations_1">Security Considerations</h2>
<ol>
<li><strong>SHA1 is Deprecated</strong>: Avoid HmacSHA1 for new deployments; considered weak by modern standards</li>
<li><strong>8-digit Codes</strong>: More secure but less user-friendly; use for high-security environments</li>
<li><strong>Period Duration</strong>: 30 seconds is standard; shorter periods increase security but reduce usability</li>
<li><strong>Look Ahead Window</strong>: Larger windows reduce failed authentications but slightly decrease security</li>
</ol>
<hr />
<h2 id="related-issues_1">Related Issues</h2>
<ul>
<li><a href="https://github.com/adorsys/keycloak-config-cli/issues/847">#847 - otpPolicyAlgorithm ignored</a></li>
</ul>
<hr />
<h2 id="additional-resources_1">Additional Resources</h2>
<ul>
<li><a href="https://www.keycloak.org/docs/latest/server_admin/#otp-policies">Keycloak OTP Policy Documentation</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc6238">TOTP RFC 6238</a></li>
<li><a href="https://datatracker.ietf.org/doc/html/rfc4226">HOTP RFC 4226</a></li>
<li><a href="../../import-settings/">Import Configuration</a></li>
</ul>












                
              </article>
            </div>
          
          
  <script>var tabs=__md_get("__tabs");if(Array.isArray(tabs))e:for(var set of document.querySelectorAll(".tabbed-set")){var labels=set.querySelector(".tabbed-labels");for(var tab of tabs)for(var label of labels.getElementsByTagName("label"))if(label.innerText.trim()===tab){var input=document.getElementById(label.htmlFor);input.checked=!0;continue e}}</script>

<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
          <button type="button" class="md-top md-icon" data-md-component="top" hidden>
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 20h-2V8l-5.5 5.5-1.42-1.42L12 4.16l7.92 7.92-1.42 1.42L13 8z"/></svg>
  Back to top
</button>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      &copy; 2024 <a href="https://github.com/adorsys" target="_blank" rel="noopener">Adorsys GmbH & Co. KG</a>

    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
        
<div class="md-social">
  
    
    
    
    
      
      
    
    <a href="https://github.com/adorsys" target="_blank" rel="noopener" title="github.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M202.1 328.7c0 20.9-10.9 55.1-36.7 55.1s-36.7-34.2-36.7-55.1 10.9-55.1 36.7-55.1 36.7 34.2 36.7 55.1M496 278.2c0 31.9-3.2 65.7-17.5 95-37.9 76.6-142.1 74.8-216.7 74.8-75.8 0-186.2 2.7-225.6-74.8-14.6-29-20.2-63.1-20.2-95 0-41.9 13.9-81.5 41.5-113.6-5.2-15.8-7.7-32.4-7.7-48.8 0-21.5 4.9-32.3 14.6-51.8 45.3 0 74.3 9 108.8 36 29-6.9 58.8-10 88.7-10 27 0 54.2 2.9 80.4 9.2 34-26.7 63-35.2 107.8-35.2 9.8 19.5 14.6 30.3 14.6 51.8 0 16.4-2.6 32.7-7.7 48.2 27.5 32.4 39 72.3 39 114.2m-64.3 50.5c0-43.9-26.7-82.6-73.5-82.6-18.9 0-37 3.4-56 6-14.9 2.3-29.8 3.2-45.1 3.2-15.2 0-30.1-.9-45.1-3.2-18.7-2.6-37-6-56-6-46.8 0-73.5 38.7-73.5 82.6 0 87.8 80.4 101.3 150.4 101.3h48.2c70.3 0 150.6-13.4 150.6-101.3m-82.6-55.1c-25.8 0-36.7 34.2-36.7 55.1s10.9 55.1 36.7 55.1 36.7-34.2 36.7-55.1-10.9-55.1-36.7-55.1"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://twitter.com/adorsys" target="_blank" rel="noopener" title="twitter.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 512 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M459.4 151.7c.3 4.5.3 9.1.3 13.6 0 138.7-105.6 298.6-298.6 298.6-59.5 0-114.7-17.2-161.1-47.1 8.4 1 16.6 1.3 25.3 1.3 49.1 0 94.2-16.6 130.3-44.8-46.1-1-84.8-31.2-98.1-72.8 6.5 1 13 1.6 19.8 1.6 9.4 0 18.8-1.3 27.6-3.6-48.1-9.7-84.1-52-84.1-103v-1.3c14 7.8 30.2 12.7 47.4 13.3-28.3-18.8-46.8-51-46.8-87.4 0-19.5 5.2-37.4 14.3-53C87.4 130.8 165 172.4 252.1 176.9c-1.6-7.8-2.6-15.9-2.6-24C249.5 95.1 296.3 48 354.4 48c30.2 0 57.5 12.7 76.7 33.1 23.7-4.5 46.5-13.3 66.6-25.3-7.8 24.4-24.4 44.8-46.1 57.8 21.1-2.3 41.6-8.1 60.4-16.2-14.3 20.8-32.2 39.3-52.6 54.3"/></svg>
    </a>
  
    
    
    
    
      
      
    
    <a href="https://www.linkedin.com/in/adorsys/" target="_blank" rel="noopener" title="www.linkedin.com" class="md-social__link">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.1.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path d="M416 32H31.9C14.3 32 0 46.5 0 64.3v383.4C0 465.5 14.3 480 31.9 480H416c17.6 0 32-14.5 32-32.3V64.3c0-17.8-14.4-32.3-32-32.3M135.4 416H69V202.2h66.5V416zM102.2 96a38.5 38.5 0 1 1 0 77 38.5 38.5 0 1 1 0-77m282.1 320h-66.4V312c0-24.8-.5-56.7-34.5-56.7-34.6 0-39.9 27-39.9 54.9V416h-66.4V202.2h63.7v29.2h.9c8.9-16.8 30.6-34.5 62.9-34.5 67.2 0 79.7 44.3 79.7 101.9z"/></svg>
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["navigation.tabs", "navigation.sections", "toc.integrate", "navigation.top", "search.suggest", "search.highlight", "content.tabs.link", "content.code.annotation", "content.code.copy"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>