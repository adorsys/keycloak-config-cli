{
  "enabled": true,
  "realm": "realmWithClients",
  "clients": [
    {
      "clientId": "auth-moped-client",
      "name": "auth-moped-client",
      "description": "Auth-Moped-Client",
      "enabled": true,
      "clientAuthenticatorType": "client-secret",
      "secret": "changed-special-client-secret",
      "redirectUris": [
        "https://moped-client.org/redirect"
      ],
      "webOrigins": [
        "https://moped-client.org/webOrigin"
      ],
      "protocolMappers": [
        {
          "name": "BranchCodeMapper",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-usermodel-attribute-mapper",
          "consentRequired": false,
          "config": {
            "aggregate.attrs": "false",
            "userinfo.token.claim": "true",
            "multivalued": "false",
            "user.attribute": "branch",
            "id.token.claim": "false",
            "access.token.claim": "true",
            "claim.name": "branch",
            "jsonType.label": "String"
          }
        }
      ],
      "serviceAccountsEnabled": true,
      "authorizationServicesEnabled": true,
      "authorizationSettings": {
        "allowRemoteResourceManagement": true,
        "policyEnforcementMode": "PERMISSIVE",
        "decisionStrategy": "UNANIMOUS",
        "resources": [
          {
            "name": "Admin Resource",
            "uri": "/protected/admin/*",
            "type": "http://servlet-authz/protected/admin",
            "scopes": [
              {
                "name": "urn:servlet-authz:protected:admin:access",
                "iconUri": "https://www.keycloak.org/resources/favicon.ico"
              }
            ]
          },
          {
            "name": "Protected Resource",
            "uris": [
              "/*"
            ],
            "type": "http://servlet-authz/protected/resource",
            "owner": {
              "name": "service-account-auth-moped-client"
            },
            "scopes": [
              {
                "name": "urn:servlet-authz:protected:resource:access"
              }
            ],
            "attributes": {
              "key": "value",
              "key2": "value2"
            },
            "ownerManagedAccess": false
          },
          {
            "name": "Premium Resource",
            "uri": "/protected/premium/*",
            "type": "urn:servlet-authz:protected:resource",
            "scopes": [
              {
                "name": "urn:servlet-authz:protected:premium:access"
              }
            ]
          },
          {
            "name": "Main Page",
            "type": "urn:servlet-authz:protected:resource",
            "scopes": [
              {
                "name": "urn:servlet-authz:page:main:actionForPremiumUser"
              },
              {
                "name": "urn:servlet-authz:page:main:actionForAdmin"
              },
              {
                "name": "urn:servlet-authz:page:main:actionForUser"
              }
            ]
          }
        ],
        "policies": [
          {
            "name": "Any Admin Policy",
            "description": "Defines that adminsitrators can do something",
            "type": "role",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "roles": "[{\"id\":\"admin\"}]"
            }
          },
          {
            "name": "Any User Policy",
            "description": "Defines that any user can do something",
            "type": "role",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "roles": "[{\"id\":\"user\"}]"
            }
          },
          {
            "name": "Only Premium User Policy",
            "description": "Defines that only premium users can do something",
            "type": "role",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "roles": "[{\"id\":\"user_premium\"}]"
            }
          },
          {
            "name": "All Users Policy",
            "description": "Defines that all users can do something",
            "type": "aggregate",
            "logic": "POSITIVE",
            "decisionStrategy": "AFFIRMATIVE",
            "config": {
              "applyPolicies": "[\"Any User Policy\",\"Any Admin Policy\",\"Only Premium User Policy\"]"
            }
          },
          {
            "name": "Administrative Resource Permission",
            "description": "A policy that defines access to administrative resources",
            "type": "resource",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "resources": "[\"Admin Resource\"]",
              "applyPolicies": "[\"Any Admin Policy\"]"
            }
          },
          {
            "name": "Premium User Scope Permission",
            "description": "A policy that defines access to a premium scope",
            "type": "scope",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "scopes": "[\"urn:servlet-authz:page:main:actionForPremiumUser\"]",
              "applyPolicies": "[\"Only Premium User Policy\"]"
            }
          },
          {
            "name": "User Action Scope Permission",
            "description": "A policy that defines access to a user scope",
            "type": "scope",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "scopes": "[\"urn:servlet-authz:page:main:actionForUser\"]",
              "applyPolicies": "[\"Any User Policy\"]"
            }
          },
          {
            "name": "Administrator Action Scope Permission",
            "description": "A policy that defines access to an administrator scope",
            "type": "scope",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "scopes": "[\"urn:servlet-authz:page:main:actionForAdmin\"]",
              "applyPolicies": "[\"Any Admin Policy\"]"
            }
          },
          {
            "name": "Protected Resource Permission",
            "description": "A policy that defines access to any protected resource",
            "type": "resource",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "resources": "[]",
              "applyPolicies": "[\"All Users Policy\"]"
            }
          }
        ],
        "scopes": [
          {
            "name": "urn:servlet-authz:protected:admin:access"
          },
          {
            "name": "urn:servlet-authz:protected:resource:access"
          },
          {
            "name": "urn:servlet-authz:protected:premium:access"
          },
          {
            "name": "urn:servlet-authz:page:main:actionForPremiumUser"
          },
          {
            "name": "urn:servlet-authz:page:main:actionForAdmin"
          },
          {
            "name": "urn:servlet-authz:page:main:actionForUser",
            "iconUri": "https://www.keycloak.org/resources/favicon.ico"
          }
        ]
      }
    },
    {
      "clientId": "moped-client",
      "name": "moped-client",
      "description": "Moped-Client",
      "enabled": true,
      "clientAuthenticatorType": "client-secret",
      "secret": "changed-special-client-secret",
      "redirectUris": [
        "https://moped-client.org/redirect"
      ],
      "webOrigins": [
        "https://moped-client.org/webOrigin"
      ],
      "protocolMappers": [
        {
          "name": "BranchCodeMapper",
          "protocol": "openid-connect",
          "protocolMapper": "oidc-usermodel-attribute-mapper",
          "consentRequired": false,
          "config": {
            "aggregate.attrs": "false",
            "userinfo.token.claim": "true",
            "multivalued": "true",
            "user.attribute": "branch",
            "id.token.claim": "false",
            "access.token.claim": "true",
            "claim.name": "branch",
            "jsonType.label": "String"
          }
        },
        {
          "protocolMapper": "oidc-full-name-mapper",
          "protocol": "openid-connect",
          "name": "full name",
          "config": {
            "id.token.claim": "true",
            "access.token.claim": "false"
          }
        }
      ],
      "serviceAccountsEnabled": true,
      "authorizationServicesEnabled": true,
      "authorizationSettings": {
        "allowRemoteResourceManagement": true,
        "policyEnforcementMode": "PERMISSIVE",
        "decisionStrategy": "UNANIMOUS"
      }
    },
    {
      "clientId": "another-client",
      "description": "Another-Client",
      "enabled": true,
      "clientAuthenticatorType": "client-secret",
      "secret": "my-other-client-secret",
      "redirectUris": [
        "*"
      ],
      "webOrigins": [
        "*"
      ]
    },
    {
      "name": "missing-id-client",
      "description": "Missing-Id-Client",
      "enabled": true,
      "clientAuthenticatorType": "client-secret",
      "secret": "my-other-missing-id-client-secret",
      "redirectUris": [
        "*"
      ],
      "webOrigins": [
        "*"
      ],
      "serviceAccountsEnabled": true,
      "authorizationServicesEnabled": true,
      "authorizationSettings": {
        "allowRemoteResourceManagement": true,
        "policyEnforcementMode": "ENFORCING",
        "decisionStrategy": "UNANIMOUS",
        "resources": [
          {
            "name": "Admin Resource",
            "uri": "/protected/admin/*",
            "type": "http://servlet-authz/protected/admin",
            "scopes": [
              {
                "name": "urn:servlet-authz:protected:user:access"
              }
            ]
          }
        ],
        "policies": [
          {
            "name": "Any Admin Policy",
            "description": "Defines that adminsitrators can do something",
            "type": "role",
            "logic": "POSITIVE",
            "decisionStrategy": "UNANIMOUS",
            "config": {
              "roles": "[{\"id\":\"user\"}]"
            }
          }
        ],
        "scopes": [
          {
            "name": "urn:servlet-authz:protected:user:access"
          }
        ]
      }
    }
  ],
  "roles": {
    "realm": [
      {
        "name": "user",
        "description": "User privileges"
      },
      {
        "name": "admin",
        "description": "Administrator privileges"
      },
      {
        "name": "user_premium",
        "description": "User Premium privileges"
      }
    ]
  },
  "users": [
    {
      "username": "service-account-auth-moped-client",
      "enabled": true,
      "serviceAccountClientId": "auth-moped-client"
    }
  ]
}
